!function(e){function n(e,n){var o=n||{},t=o.aggressive||!1,i=m(o.sensitivity,20),r=m(o.timer,1e3),a=m(o.delay,0),c=o.callback||function(){},s=v(o.cookieExpire)||"",u=o.cookieDomain?";domain="+o.cookieDomain:"",p=o.cookieName?o.cookieName:"viewedOuibounceModal",f=!0===o.sitewide?";path=/":"",l=null,d=document.documentElement;function m(e,n){return void 0===e?n:e}function v(e){var n=24*e*60*60*1e3,o=new Date;return o.setTime(o.getTime()+n),"; expires="+o.toUTCString()}function k(e){e.clientY>i||(l=setTimeout(g,a))}function h(){l&&(clearTimeout(l),l=null)}setTimeout(function(){w()||(d.addEventListener("mouseleave",k),d.addEventListener("mouseenter",h),d.addEventListener("keydown",b))},r);var _=!1;function b(e){_||e.metaKey&&76===e.keyCode&&(_=!0,l=setTimeout(g,a))}function w(){return function(e,n){return function(){for(var e=document.cookie.split("; "),n={},o=e.length-1;o>=0;o--){var t=e[o].split("=");n[t[0]]=t[1]}return n}()[e]===n}(p,"true")&&!t}function g(){w()||(e&&(e.style.display="block"),c(),y())}function y(e){var n=e||{};void 0!==n.cookieExpire&&(s=v(n.cookieExpire)),!0===n.sitewide&&(f=";path=/"),void 0!==n.cookieDomain&&(u=";domain="+n.cookieDomain),void 0!==n.cookieName&&(p=n.cookieName),document.cookie=p+"=true"+s+u+f,d.removeEventListener("mouseleave",k),d.removeEventListener("mouseenter",h),d.removeEventListener("keydown",b)}return{fire:g,disable:y,isDisabled:w}}e("body").on("click",function(n){e(n.target).is(".noptin-optin-form-wrapper")});var o=function(n){e(n).closest(".noptin-popup-main-wrapper").addClass("open").on("click",function(o){e(n).is(o.target)||0!==e(n).has(o.target).length||e(n).closest(".noptin-popup-main-wrapper").removeClass("open")}).find(".noptin-form-close").on("click",function(){e(".noptin-popup-main-wrapper").removeClass("open")})},t={immeadiate:function(){o(this)},before_leave:function(){var e=this;n(!1,{callback:function(){o(e)},aggressive:!0})},on_scroll:function(){parseInt(e(this).data("on-scroll")),parseInt(e(document).height()),popup=this,e(document).scroll(function(){console.log(e(document).scrollTop())})},after_delay:function(){var n=parseInt(e(this).data("after-delay")),t=this;setTimeout(function(){o(t)},1e3*n)},after_comment:function(){e("#commentform").on("submit",function(e){})},after_click:function(){var n=e(this).data("after-click"),t=this;e(n).on("click",function(e){e.preventDefault(),o(t)})}};e(".noptin-popup-main-wrapper .noptin-optin-form-wrapper").each(function(){var n=e(this).data("trigger");t[n]&&t[n].call(this)}),e(".wp-block-noptin-email-optin form, .noptin-email-optin-widget form").on("submit",function(n){n.preventDefault();var o=e(this);e(this).fadeTo(600,.2),e(o).find(".noptin_feedback_success").hide(),e(o).find(".noptin_feedback_error").hide();var t=e(this).find(".noptin_form_input_email").val();e.post(noptin.ajaxurl,{email:t,action:"noptin_new_user",noptin_subscribe:noptin.noptin_subscribe},function(n,t,i){if(n=JSON.parse(n),e(o).fadeTo(600,1),"1"==n.result){e(o).find(".noptin_feedback_success").text(n.msg).show();var r=e(o).find(".noptin_form_redirect").val();r&&(window.location=r)}else e(o).find(".noptin_feedback_error").text(n.msg).show()}).fail(function(){e(o).fadeTo(600,1),e(o).find(".noptin_feedback_error").text("Could not establish a connection to the server.").show()})})}(jQuery);